<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户登录</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script src="js/jquery.min.js"></script>
    <script src="js/common.js"></script>
    <!--背景图片自动更换-->
    <script src="js/supersized.3.2.7.min.js"></script>
    <script src="js/supersized-init.js"></script>
    <!--表单验证-->
    <script src="js/jquery.validate.min.js?var1.14.0"></script>
   <!-- <script type="text/javascript" src="jquery.min.js"></script>-->
</head>
<body>

<div class="login-container">
    <h1>小弟弟,快来呀</h1>

    <div class="connect">
        <p>www.mycodes.net</p>
    </div>

    <form action="" method="post" id="loginForm">
        <div>
            <input type="text" name="username" class="username" placeholder="用户名" autocomplete="off"/>
        </div>
        <div>
            <input type="text" name="auth" class="auth" placeholder="验证码" oncontextmenu="return false" onpaste="return false" style="width:120px; float: left"  />
            <input id="but" type="button" value="获取验证码" class="but" style="width: 150px;">
        </div>
        <button id="submit" type="button">登 录</button>
    </form>

    <a href="register.html">
        <button type="button" class="register-tis">还有没有账号？</button>
    </a>
</div>


</body>
<script>
    $(function () {
        $("#submit").click(function () {
            $.post("user/login",{"username":$("input[name=username]").val(),"auth":$("input[name=auth]").val()},function (data) {
                  if (data == 'six'){
                      window.location.href=("emp.html");
                  }else {
                      alert(data)
                  }
            },"json")
        })
        function timer(time) {
            var btn = $("#but");
            btn.attr("disabled", true);  //按钮禁止点击
            btn.val(time <= 0 ? "获取" : ("" + (time) + "秒"));
            var hander = setInterval(function() {
                if (time <= 0) {
                    clearInterval(hander); //清除倒计时
                    btn.val("获取");
                    btn.attr("disabled", false);
                    return false;
                }else {
                    btn.val("" + (time--) + "秒");
                }
            }, 1000);
        }
        $("#but").click(function () {
           timer(60);
            $.post("user/getAuth",{'username':$("#usernmae").val()},function (data) {
                if (data == 'success'){
                    alert("验证码发送成功");
                }else{
                    alert(data);
                }
            },"json");

        });
    })
</script>
</html>